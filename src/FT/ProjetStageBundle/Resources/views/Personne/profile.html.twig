{% extends "FTProjetStageBundle::index.html.twig" %}

{% block body %}
    <div class="text-center" style="padding:50px 0">
        <div class="logo">Détails du compte</div>
        <div class="login-form-1">
            {{ include("FTProjetStageBundle:Personne:form.html.twig") }}
        </div>
    </div>
{% endblock %}
{% block js %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            $(document).on('blur', '.form-control', function () {
                $('#errorEmail').fadeOut();
                $('#errorUsername').fadeOut();
                var path = Routing.generate("ft_personne_profile_modif_ajax")
                var champSelected = $(this).attr('datas-id');
                var value = $(this).val();
                var json = {'champ': champSelected, 'value': value};

                console.log("Champ sélectionné : " + champSelected);
                console.log("Valeur du champ : " + value);

                $.post(path, json, function (response) {
                    console.log(response);
                    if (response.Email != undefined) {
                        console.log('Email erreur');
                        $('#errorEmail').fadeIn();
                    }
                    if (response.Username != undefined) {
                        console.log('Username erreur');
                        $('#errorUsername').fadeIn();
                    }
                });
            });
        });
    </script>
{% endblock %}